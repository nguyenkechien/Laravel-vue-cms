{"version":3,"sources":["webpack:///./resources/js/BE/config.js","webpack:///./resources/js/BE/http/http-common.js","webpack:///./resources/js/BE/services/CategoryService/Blog.js","webpack:///./resources/js/BE/pages/Category/_blog.vue?007b","webpack:///resources/js/BE/pages/Category/_blog.vue","webpack:///./resources/js/BE/pages/Category/_blog.vue?3276","webpack:///./resources/js/BE/pages/Category/_blog.vue"],"names":["config","DOMAIN_API","xToken","document","head","querySelector","Axios","create","baseURL","headers","content","CategoryBlogService","http","get","response","status","_vm","$router","push","name","category","post","put","id","data","fields","openDialog","editIndex","maxDate","isLoading","sheet","opentSheet","message","watch","methods","editItem","this","categories","blog","findIndex","forEach","field","val","item","ref","getMaxDate","Date","a","created_at","b","toDateString","computed","formTitle","component","_h","$createElement","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","_v","_s","on","$event","onSave","proxy","updated_at","toLocaleString","publish","deleteItem","$set"],"mappings":"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","file":"10.js","sourcesContent":["const NODE_ENV = process.env.NODE_ENV;\r\n\r\nconst dev = {\r\n    DOMAIN_API: \"http://127.0.0.1:8000\"\r\n};\r\n\r\nconst prod = {\r\n    DOMAIN_API: \"https://127.0.0.2\"\r\n};\r\n\r\nexport const config = NODE_ENV == \"development\" ? dev : prod;\r\n","import Axios from \"axios\";\nimport {config} from \"../config.js\";\n\nconst xToken = document.head.querySelector('meta[name=\"x-token\"]');\n\nexport default Axios.create({\n  baseURL: `${config.DOMAIN_API}/api`,\n  headers: {\n    \"Content-type\": \"application/json\",\n    \"Authorization\": `Bearer ${xToken.content}`\n  }\n});\n","import http from \"./../../http/http-common\";\n\nclass CategoryBlogService {\n  async index() {\n    try {\n      return await http.get(\"/category\");\n    } catch ({ response }) {\n      if (response.status === 500) _vm.$router.push({name: 'Logout'})\n    }\n  }\n  show(category) {}\n  async create(category) {\n    return await http.post(\"/category\", category);\n  }\n  async update(category) {\n    return await http.put('/category/' + category.id, category);\n  }\n  async destroy(id) {\n    return await http.delete(`/category/${id}`);\n  }\n}\n\nexport default new CategoryBlogService();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('base-material-card',{staticClass:\"px-5 py-10\",attrs:{\"color\":\"warning\"},scopedSlots:_vm._u([{key:\"heading\",fn:function(){return [_c('div',{staticClass:\"display-2 font-weight-light\"},[_vm._v(\"Danh mục Blog\")]),_vm._v(\" \"),_c('div',{staticClass:\"subtitle-1 font-weight-light\"},[_vm._v(\"Danh mục mới nhất vào ngày \"+_vm._s(_vm.maxDate))]),_vm._v(\" \"),_c('v-spacer',{staticClass:\"py-3\"}),_vm._v(\" \"),_c('base-dialogs-form-input',{attrs:{\"formTitle\":_vm.formTitle,\"fields\":_vm.fields,\"openDialog\":_vm.openDialog,\"editIndex\":_vm.editIndex},on:{\"update:fields\":function($event){_vm.fields=$event},\"update:openDialog\":function($event){_vm.openDialog=$event},\"update:open-dialog\":function($event){_vm.openDialog=$event},\"update:editIndex\":function($event){_vm.editIndex=$event},\"update:edit-index\":function($event){_vm.editIndex=$event},\"save\":_vm.onSave}})]},proxy:true}])},[_vm._v(\" \"),_c('v-card-text',[_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"loading\":_vm.isLoading,\"items\":_vm.categories.blog},scopedSlots:_vm._u([{key:\"item.updated_at\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(_vm._s(new Date(item.updated_at).toLocaleString()))]}},{key:\"item.publish\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(_vm._s(item.publish == 1 ? true : false))]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.editItem(item)}}},[_vm._v(\"fal fa-pencil\")]),_vm._v(\" \"),_c('v-icon',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.deleteItem(item)}}},[_vm._v(\"fal fa-trash-alt\")])]}}])})],1)],1),_vm._v(\" \"),_c('base-bottom-sheet',{attrs:{\"opentSheet\":_vm.sheet.opentSheet,\"message\":_vm.sheet.message},on:{\"update:opentSheet\":function($event){return _vm.$set(_vm.sheet, \"opentSheet\", $event)},\"update:opent-sheet\":function($event){return _vm.$set(_vm.sheet, \"opentSheet\", $event)}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container>\r\n    <base-material-card color=\"warning\" class=\"px-5 py-10\">\r\n      <template v-slot:heading>\r\n        <div class=\"display-2 font-weight-light\">Danh mục Blog</div>\r\n        <div class=\"subtitle-1 font-weight-light\">Danh mục mới nhất vào ngày {{ maxDate }}</div>\r\n        <v-spacer class=\"py-3\" />\r\n        <base-dialogs-form-input\r\n          :formTitle=\"formTitle\"\r\n          :fields.sync=\"fields\"\r\n          :openDialog.sync=\"openDialog\"\r\n          :editIndex.sync=\"editIndex\"\r\n          @save=\"onSave\"\r\n        />\r\n      </template>\r\n      <v-card-text>\r\n        <v-data-table :headers=\"headers\" :loading=\"isLoading\" :items=\"categories.blog\">\r\n          <template\r\n            v-slot:item.updated_at=\"{ item }\"\r\n          >{{ new Date(item.updated_at).toLocaleString() }}</template>\r\n          <template v-slot:item.publish=\"{ item }\">{{ item.publish == 1 ? true : false}}</template>\r\n          <template v-slot:item.actions=\"{ item }\">\r\n            <v-icon small class=\"mr-2\" @click=\"editItem(item)\">fal fa-pencil</v-icon>\r\n            <v-icon small @click=\"deleteItem(item)\">fal fa-trash-alt</v-icon>\r\n          </template>\r\n        </v-data-table>\r\n      </v-card-text>\r\n    </base-material-card>\r\n    <base-bottom-sheet :opentSheet.sync=\"sheet.opentSheet\" :message=\"sheet.message\" />\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport CategoryBlogService from \"./../../services/CategoryService/Blog\";\r\nimport { mapState, mapMutations } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"CategoryBlog\",\r\n  data() {\r\n    return {\r\n      headers: [\r\n        {\r\n          sortable: false,\r\n          text: \"ID\",\r\n          value: \"id\"\r\n        },\r\n        {\r\n          sortable: true,\r\n          text: \"Name\",\r\n          value: \"name\"\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: \"Param\",\r\n          value: \"param\",\r\n          align: \"right\"\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: \"Publish\",\r\n          value: \"publish\",\r\n          align: \"right\"\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: \"Updated at\",\r\n          value: \"updated_at\",\r\n          align: \"right\"\r\n        },\r\n        {\r\n          text: \"Actions\",\r\n          value: \"actions\",\r\n          sortable: false,\r\n          align: \"right\"\r\n        }\r\n      ],\r\n      fields: [\r\n        {\r\n          ref: \"name\",\r\n          title: \"Name\",\r\n          val: \"\",\r\n          rules: [],\r\n          required: true,\r\n          type: \"text\"\r\n        },\r\n        {\r\n          ref: \"description\",\r\n          title: \"Description\",\r\n          val: \"\",\r\n          rules: [],\r\n          required: true,\r\n          type: \"text\"\r\n        },\r\n        {\r\n          ref: \"param\",\r\n          title: \"Param\",\r\n          val: \"\",\r\n          rules: [],\r\n          required: true,\r\n          type: \"text\"\r\n        },\r\n        {\r\n          ref: \"meta_description\",\r\n          title: \"Meta description\",\r\n          val: \"\",\r\n          rules: [],\r\n          required: false,\r\n          type: \"text\"\r\n        },\r\n        {\r\n          ref: \"meta_keywords\",\r\n          title: \"Meta keywords\",\r\n          val: \"\",\r\n          rules: [],\r\n          required: false,\r\n          type: \"text\"\r\n        },\r\n        {\r\n          ref: \"meta_title\",\r\n          title: \"Meta title\",\r\n          val: \"\",\r\n          rules: [],\r\n          required: false,\r\n          type: \"text\"\r\n        },\r\n        {\r\n          ref: \"publish\",\r\n          title: \"Publish\",\r\n          val: false,\r\n          rules: [],\r\n          required: false,\r\n          type: \"switch\"\r\n        },\r\n        {\r\n          ref: \"id\",\r\n          title: \"id\",\r\n          val: \"\",\r\n          rules: [],\r\n          required: false,\r\n          type: \"hidden\"\r\n        }\r\n      ],\r\n      openDialog: false,\r\n      editIndex: -1,\r\n      maxDate: null,\r\n      isLoading: true,\r\n      sheet: {\r\n        opentSheet: false,\r\n        message: \"\"\r\n      }\r\n    };\r\n  },\r\n  watch: {},\r\n  methods: {\r\n    ...mapMutations({\r\n      setCategories: \"SET_CATEGORIES\"\r\n    }),\r\n    editItem(item) {\r\n      this.openDialog = true;\r\n      this.editIndex = this.categories.blog.findIndex(\r\n        data => data.name == item.name\r\n      );\r\n      this.fields.forEach(field => {\r\n        field.val = item[field.ref];\r\n      });\r\n    },\r\n    async deleteItem(item) {\r\n      const index = await this.categories.blog.findIndex(\r\n        i => i.name == item.name\r\n      );\r\n      if (index > -1) {\r\n        await CategoryBlogService.destroy(item.id).then(\r\n          ({ data: { message } }) => {\r\n            this.categories.blog.splice(index, 1);\r\n            this.sheet.opentSheet = true;\r\n            this.sheet.message = message;\r\n          }\r\n        );\r\n      }\r\n    },\r\n    async onSave(item) {\r\n      if (this.editIndex > -1) {\r\n        await CategoryBlogService.update(item)\r\n          .then(({ data: { data } }) => {\r\n            Object.assign(this.categories.blog[this.editIndex], data);\r\n            this.$store.commit(\"SET_CATEGORIES\", {\r\n              ...this.categories,\r\n              blog: this.categories.blog\r\n            });\r\n          })\r\n      } else {\r\n        await CategoryBlogService.create(item).then(({ data: { data } }) => {\r\n          this.categories.blog.push(data);\r\n        });\r\n      }\r\n      this.openDialog = false;\r\n      this.editIndex = -1;\r\n    },\r\n    getMaxDate() {\r\n      const maxDate = this.categories.blog.reduce((a, b) => {\r\n        return new Date(a.created_at) > new Date(b.created_at) ? a : b;\r\n      });\r\n      this.maxDate = new Date(maxDate.created_at).toDateString();\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState([\"categories\"]),\r\n    formTitle() {\r\n      return this.editIndex === -1 ? \"New Item\" : \"Edit Item\";\r\n    }\r\n  },\r\n  async mounted() {\r\n    if (!this.categories.blog) {\r\n      const { data } = await CategoryBlogService.index();\r\n      try {\r\n        this.setCategories({\r\n          ...this.categories,\r\n          blog: data.data\r\n        });\r\n        this.getMaxDate();\r\n      } catch (error) {\r\n        console.log(error);\r\n        this.isLoading = true;\r\n      }\r\n    }\r\n    this.isLoading = false;\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_blog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_blog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_blog.vue?vue&type=template&id=00259116&\"\nimport script from \"./_blog.vue?vue&type=script&lang=js&\"\nexport * from \"./_blog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}